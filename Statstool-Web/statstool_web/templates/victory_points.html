{% extends "base_layout.html" %}
{% block content %}
<script src="{{url_for('main.colorize')}}"></script>
<center><h1>Siegpunkte</h1></center>
<table class = "table table-striped table-bordered mydatatable" style = "width: 66%">
  <thead>
    <tr>
      {% for label in header_labels%}
      <th>{{label}}</th>
      {% endfor %}
    </tr>
  </thead>
  <tbody>
    {% for name, tag, color_hex,color_hsl in nation_info%}
      <tr>
        {% if color_hsl[2] > 0.5 %}
          <td bgcolor = "{{color_hex}}" style="color:black">{{name}}</td>
        {% else %}
          <td bgcolor = "{{color_hex}}" style="color:white">{{name}}</td>
        {% endif %}
        {% for value in data[tag] %}
          <td>{{value}}</td>
        {% endfor %}
      </tr>
    {% endfor %}
  </tbody>
</table>

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.10.19/js/dataTables.bootstrap4.min.js"></script>
<script type="text/javascript">
  var num_columns = {{num_columns|tojson}};
  $(document).ready(function() {
    // Table Heat Map;
    for (i = 2; i <= num_columns; i++) {
      $('table tbody td:nth-child(' + i + ')').colorize();
    }
  });
  $('.mydatatable').DataTable({paging: false, info: false, "order": [[ num_columns - 1, "desc" ]], searching: false});
</script>
{% endblock content %}
